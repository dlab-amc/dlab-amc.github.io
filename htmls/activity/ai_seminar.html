---
layout: default
---

<article id="main">
  <header class="special container">
    <h2>Lab Seminars</h2>
  </header>

  <section class="wrapper style1 container">
    {%- assign base = site.baseurl -%} {%- assign items = site.posts | where:
    "layout", "activity_post" | where: "type", "ai_seminar" | sort: "date" |
    reverse -%}

    <!-- 상단: 총 건수 + 검색 -->
    <div class="activity-toolbar">
      <div class="activity-toolbar-count">총 {{ items | size }}건</div>

      <div class="activity-search-wrapper">
        <span class="activity-search-icon"
          ><i class="fa-solid fa-magnifying-glass"></i
        ></span>
        <input
          id="searchInput"
          type="text"
          placeholder="검색어를 입력하세요."
          class="activity-search-input"
        />
      </div>
    </div>

    <!-- ✅ 흰색 박스(컨테이너) -->
    <div class="activity-container">
      {%- if items and items.size > 0 -%}
      <!-- 카드 그리드 -->
      <div id="grid" class="activity-grid">
        {%- for post in items -%} {%- assign url = post.video_url | default: ""
        -%} {%- assign youtube_id = "" -%} {%- if url contains "youtu.be/" -%}
        {%- assign tmp = url | split: "youtu.be/" -%} {%- assign youtube_id =
        tmp[1] | split: "?" | first | split: "&" | first -%} {%- elsif url
        contains "youtube.com/watch" -%} {%- assign tmp = url | split: "v=" -%}
        {%- assign youtube_id = tmp[1] | split: "&" | first -%} {%- elsif url
        contains "youtube.com/embed/" -%} {%- assign tmp = url | split:
        "youtube.com/embed/" -%} {%- assign youtube_id = tmp[1] | split: "?" |
        first | split: "&" | first -%} {%- endif -%}

        <a
          class="card activity-card"
          href="{{ base }}{{ post.url }}"
          data-title="{{ post.title | downcase }}"
          data-author="{{ post.author | downcase }}"
          data-extra="{{ post.extra_info | default:'' | downcase }}"
        >
          <div class="activity-card-thumb">
            <img
              src="https://img.youtube.com/vi/{{ youtube_id }}/hqdefault.jpg"
              alt="thumbnail"
            />
          </div>

          <div class="activity-card-body">
            <div class="activity-card-text">
              <div class="activity-card-title">{{ post.title }}</div>

              <div class="activity-card-meta">
                <span>{{ post.date | date: "%Y-%m-%d" }}</span>
              </div>
            </div>

            <div class="activity-card-arrow">
              <i class="fa fa-angle-right" aria-hidden="true"></i>
            </div>
          </div>
        </a>
        {%- endfor -%}
      </div>

      <!-- 검색 결과가 0개일 때 표시 -->
      <div id="emptySearch" class="activity-empty" style="display: none">
        게시글이 존재하지 않습니다.
      </div>

      {%- else -%}
      <div class="activity-empty-all">게시글이 존재하지 않습니다.</div>
      {%- endif -%}
    </div>
  </section>
</article>

<script>
  (function () {
    const input = document.getElementById('searchInput');
    const grid = document.getElementById('grid');
    if (!input || !grid) return;

    const cards = Array.from(grid.querySelectorAll('.card'));
    const emptySearch = document.getElementById('emptySearch');
    const countElement = document.querySelector('.activity-toolbar-count');
    const totalCount = cards.length;

    function apply() {
      const q = (input.value || '').trim().toLowerCase();
      let visible = 0;

      cards.forEach((el) => {
        const t = el.dataset.title || '';
        const a = el.dataset.author || '';
        const e = el.dataset.extra || '';
        const ok = !q || t.includes(q) || a.includes(q) || e.includes(q);
        el.style.display = ok ? 'block' : 'none';
        if (ok) visible += 1;
      });

      if (emptySearch)
        emptySearch.style.display = visible === 0 ? 'block' : 'none';

      // 검색 결과에 맞게 건수 업데이트
      if (countElement) {
        if (q) {
          countElement.textContent = `총 ${visible}건`;
        } else {
          countElement.textContent = `총 ${totalCount}건`;
        }
      }
    }

    // 검색어 입력 후 Enter를 눌렀을 때만 필터 적용
    input.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        apply();
      }
    });
  })();
</script>
